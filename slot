package main

import (
	"fmt"
	"math/rand"
	"time"
)

// Semboller ve Ã¶deme tablosu
var symbols = []string{"ğŸ’", "ğŸŠ", "ğŸ‹", "ğŸ‰", "ğŸ‡", "ğŸ’"}
var payTable = map[string]int{
	"ğŸ’": 1,
	"ğŸŠ": 2,
	"ğŸ‹": 3,
	"ğŸ‰": 4,
	"ğŸ‡": 5,
	"ğŸ’": 10,
}

// Oyuncunun bakiyesi
var balance = 100

// Slot makinesi Ã§evirme fonksiyonu
func spin() [][]string {
	rand.Seed(time.Now().UnixNano())
	board := make([][]string, 3)
	for i := range board {
		board[i] = make([]string, 3)
		for j := range board[i] {
			board[i][j] = symbols[rand.Intn(len(symbols))]
		}
	}
	return board
}

// KazancÄ± hesaplayan fonksiyon
func calculateWin(board [][]string, bet int) int {
	winAmount := 0

	// SatÄ±r kazanÃ§larÄ±
	for i := 0; i < 3; i++ {
		count := make(map[string]int)
		for j := 0; j < 3; j++ {
			count[board[i][j]]++
		}
		for _, symbol := range symbols {
			if count[symbol] >= 3 {
				winAmount += payTable[symbol]
			}
		}
	}

	// SÃ¼tun kazanÃ§larÄ±
	for j := 0; j < 3; j++ {
		count := make(map[string]int)
		for i := 0; i < 3; i++ {
			count[board[i][j]]++
		}
		for _, symbol := range symbols {
			if count[symbol] >= 3 {
				winAmount += payTable[symbol]
			}
		}
	}

	return winAmount * bet
}

func main() {
	fmt.Println("Slot Makinesine HoÅŸ Geldiniz!")

	fmt.Printf("Bakiyeniz: %v\n", balance)

	// Bahis al
	for i := 20; i < 101; i++ {
		for balance > 10 {
			var bet int = 10
			if bet <= 0 || bet > balance {
				fmt.Println("GeÃ§ersiz bahis miktarÄ±. LÃ¼tfen tekrar deneyin.")
				continue
			}

			// Slot makinesini Ã§evir
			board := spin()

			// SonuÃ§larÄ± ekrana yazdÄ±r
			for _, row := range board {
				fmt.Println(row)
			}

			// KazancÄ± hesapla
			winAmount := calculateWin(board, bet)

			// KazancÄ± ekrana yazdÄ±r
			if winAmount > 0 {
				fmt.Printf("Tebrikler! KazandÄ±nÄ±z: %d\n", winAmount)
			} else {
				fmt.Println("Maalesef kazanamadÄ±nÄ±z.")
			}

			// Bakiyeyi gÃ¼ncelle
			balance += winAmount - bet

			// Oyunu yeniden oynamak isteyip istemediÄŸini sor
			if balance <= 0 {
				fmt.Println("Bakiyeniz tÃ¼kendi. Oyunu bitirin.")
				break
			}
			fmt.Printf("Bakiyeniz: %d\n", balance)

		}
	}
}
